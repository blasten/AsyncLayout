<!DOCTYPE html>
<html>
<head>
  <title>ListView</title>
  <link rel="stylesheet" href="../dist/layout.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    .header {
      background-color: rgba(200, 200, 200, 0.8);
      font-weight: bold;
      padding: 10px;
    }

    .item {
      padding: 10px;
      border-bottom: 1px solid #ccc;
    }

    #scrollingElement {
      width: 50vw;
      height: 50vh;
      overflow-x: hidden;
      overflow-y: auto;
      position: absolute;
      top: 25vh;
      left: 25vw;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
    }

    layout-vertical {
      top: 0;
      left: 0;
      right: 0;
      height: 500000px;
    }
  </style>
</head>
<body>
  
<!--   <div id="scrollingElement"> -->
    <layout-vertical>
      <template id="header">
        <div class="header">{{name}}</div>
      </template>
      <template id="item">
        <div class="item" onclick="{{click()}}">{{description}}</div>
      </template>
      <!-- <div class="header" data-pool-id="header" data-id="0">Header for section 1</div>

      <div class="item" data-pool-id="row" data-id="0:0">
        <b>0</b><div>Id aliqua ullamco ullamco commodo ipsum Lorem. Amet ut eu voluptate cillum occaecat Lorem et cillum excepteur ullamco mollit enim. Ea nostrud dolore culpa nulla nostrud ex voluptate anim laborum esse commodo sunt. Velit laboris pariatur labore dolore occaecat enim fugiat qui. Sit in eu ex aute minim deserunt qui consectetur laboris nostrud ad quis qui id.</div>
      </div>

      <div class="item" data-pool-id="row" data-id="0:1">
        <b>1</b><div>Laboris nisi cupidatat occaecat officia ea sunt ex deserunt mollit. Est laboris in amet eu reprehenderit nisi minim. Id nulla fugiat ad nostrud nostrud tempor adipisicing. Minim duis esse irure nostrud cillum cupidatat. Cupidatat proident labore id duis deserunt cupidatat do incididunt sint minim consectetur. Ea Lorem reprehenderit fugiat culpa dolore consequat exercitation labore sit sunt culpa laborum dolore.
       Ad nisi incididunt ea ex ullamco magna tempor. Ipsum fugiat commodo reprehenderit deserunt in adipisicing. Reprehenderit aliqua mollit ut enim. Veniam ipsum occaecat nisi ut pariatur dolor magna ea tempor eiusmod adipisicing aliqua adipisicing. Fugiat irure laborum incididunt nostrud cupidatat consectetur.
       Ex esse cupidatat exercitation aute eu est excepteur tempor consectetur elit elit amet. Ullamco sunt aliqua veniam eu eiusmod esse sit. Incididunt aute non ex irure in deserunt. Nulla sit nulla sunt quis Lorem tempor officia exercitation nulla esse ipsum. Non qui sint ullamco minim ut consequat consectetur Lorem consequat.
       Eiusmod irure aliqua magna non ea enim incididunt. Irure ea sunt deserunt laboris qui. Officia nostrud aute commodo sit sunt nisi irure officia cillum tempor id do tempor et. Est cupidatat esse consequat laboris culpa minim exercitation laboris eu. Ea incididunt nulla fugiat est pariatur do velit consectetur. Veniam dolor mollit veniam dolore ea consequat qui dolore deserunt adipisicing officia officia eu est. Velit dolor nostrud veniam reprehenderit consectetur quis ad consequat aliquip dolore labore.
       In nisi non sunt elit aute nisi elit in adipisicing excepteur ex. Anim nulla ex tempor qui nulla dolor aute fugiat et sit ipsum sunt eiusmod sunt. Irure est dolore proident qui est adipisicing minim. Sint consequat adipisicing aute amet adipisicing adipisicing. Do labore ea enim occaecat cupidatat et. Elit deserunt anim commodo ullamco. Consequat elit excepteur nisi mollit ea.</div>
      </div>
      <div class="item" data-pool-id="row" data-id="0:2">
        <b>2</b><div>Ullamco eiusmod velit labore sunt deserunt excepteur commodo sunt anim incididunt ullamco adipisicing labore Lorem. Est id nostrud ad eiusmod ad ex aliqua quis irure dolore nostrud. Aute nostrud magna tempor ex pariatur cupidatat occaecat cillum ipsum reprehenderit cillum aute proident ex. Lorem ea ipsum quis adipisicing sit exercitation ipsum. Consectetur amet nulla id amet exercitation labore minim eu nisi ullamco id do. Cillum laborum sint elit laborum eiusmod irure nulla irure. Id officia mollit commodo do laborum ut officia officia. Irure reprehenderit aliqua mollit pariatur. Exercitation laborum reprehenderit fugiat nisi pariatur anim mollit magna aliquip eu labore culpa reprehenderit. Irure ad quis magna laboris nisi commodo. Pariatur ea exercitation labore laborum amet et mollit. Magna tempor laboris officia commodo exercitation consectetur ullamco esse. Non cillum laborum et et nisi. Culpa laboris ad amet est minim qui ea. Consequat nulla voluptate incididunt enim qui proident consectetur et adipisicing mollit. Esse elit incididunt excepteur deserunt reprehenderit quis irure eu Lorem tempor. Qui ea pariatur laborum culpa nulla eu consectetur exercitation. Do nisi occaecat eiusmod ad cupidatat nostrud deserunt ea ex ullamco do exercitation. Sit aliqua magna Lorem tempor commodo duis duis eu ex. Do labore voluptate proident elit ad id. Lorem laboris nostrud esse occaecat. Deserunt elit nisi et labore fugiat consectetur excepteur esse culpa. Amet ipsum sunt minim sint laboris incididunt. Esse excepteur excepteur mollit ea ipsum exercitation. In dolore nulla eiusmod exercitation culpa in voluptate voluptate ipsum dolore proident. Minim enim veniam occaecat deserunt eiusmod consectetur consectetur elit id magna laboris reprehenderit nisi. Magna enim cupidatat non laborum minim anim consequat. Exercitation cupidatat tempor irure consequat.</div>
      </div>
      <div class="item" data-pool-id="row" data-id="0:3">
        <b>3</b><div>Cillum ullamco ullamco sunt sunt incididunt ea commodo enim nulla irure irure. Magna sunt incididunt do duis ad. Magna pariatur dolore commodo duis reprehenderit commodo aliqua anim sit deserunt veniam aute officia. Consequat non deserunt deserunt cupidatat ad do culpa. Labore aliqua aliqua ex sint ut. Enim ullamco elit eu mollit id ullamco. Tempor velit amet anim sint est ea consequat commodo ea. Aliquip magna veniam pariatur sint ullamco est aliquip do reprehenderit qui. Anim nulla occaecat commodo quis velit fugiat veniam ut. Est nisi proident id incididunt occaecat aliquip in cillum reprehenderit non et. Incididunt consectetur fugiat aute excepteur eu reprehenderit ex laboris dolore dolor reprehenderit mollit. Amet laboris ipsum ullamco id pariatur commodo excepteur est sint cillum incididunt.</div>
      </div>
      <div class="item" data-pool-id="row" data-id="0:4">
        <b>4</b><div>Officia do consequat ullamco est voluptate voluptate. Esse tempor irure aute ullamco. Aliqua veniam esse mollit veniam elit consectetur aliqua anim. Irure aute nostrud voluptate tempor consequat ut elit elit ipsum cupidatat. Aliqua duis duis minim tempor mollit qui. Labore id adipisicing laborum commodo. Tempor aliqua velit excepteur velit laborum Lorem id amet pariatur. Et nisi reprehenderit aliquip dolore ea ut aliquip duis laboris pariatur tempor cillum. Pariatur quis mollit aliquip ut proident sunt. Est aute laboris tempor officia. Sint anim qui officia deserunt amet Lorem occaecat aliquip. In eiusmod elit anim id elit eiusmod ex veniam sit sit adipisicing aliquip. Quis irure fugiat labore ex pariatur fugiat est irure. Deserunt commodo in nostrud sit Lorem amet non quis commodo eu. Nulla voluptate id enim commodo fugiat esse qui magna nostrud occaecat. Excepteur sunt cupidatat esse consequat sit voluptate ipsum magna excepteur deserunt sunt laboris labore minim. Labore ipsum ullamco dolore sint ut aliqua id nisi sunt id ipsum ea aute magna. Consequat qui commodo velit esse anim reprehenderit ea anim ut duis et veniam deserunt. Consequat amet dolor esse cupidatat incididunt exercitation laboris esse in labore. Culpa commodo commodo veniam elit elit. Consequat proident deserunt voluptate ea ut consectetur sit ex ex proident dolore nisi. Mollit est mollit sint eiusmod mollit voluptate adipisicing tempor cupidatat nisi duis dolor irure id. Eu velit aliquip consectetur mollit. Officia ipsum incididunt cupidatat occaecat consequat adipisicing. Aute cupidatat quis quis consectetur aliqua. Consequat ut eu exercitation elit Lorem incididunt sint commodo ut consectetur eu non. Pariatur pariatur ut sunt aliquip exercitation nostrud mollit cillum nostrud ea cillum.</div> -->
      </div>
    </layout-vertical>
  </div>

  <script>
    (function(list) {
      console.log('fetch data.json');
      fetch('data.json')
        .then(d => d.json())
        .then(data => {
          let hiddenSet = {};

          window.data = data;

          function toggleHidden() {
            let section = ~~this.dataset.section;
            hiddenSet[section] = !hiddenSet[section];
            list.props = list.props;
          }

          list.props = {
            scrollingElement: document.scrollingElement,
            numberOfSections: 10,
            // sectionIndex: 0,
            // rowIndex: 0,
            // bottom: true,
            numberOfRowsInSection: (section) => {
              return hiddenSet[section] ? 0 : data.length;
            },
            domForRow: (container, section, row) => {
              renderTemplate(document.getElementById('item'), data[row], container);

              // if (container.children.length === 0) {
              //   container.innerHTML = `<b>${data[row].index}</b>
              //     <div>${data[row].longText}</div>`;
              //   container.classList.add('item');
              // } else {
              //   container.children[0].textContent = data[row].index;
              //   container.children[1].textContent = data[row].longText;
              // }
            },
            domForHeader: (container, section) => {
              renderTemplate(document.getElementById('header'), data[row], container);
              // container.dataset.section = section;
              // container.onclick = toggleHidden;
              // container.textContent = `Header for section ${section+1}`;
              // container.classList.add('header');
            },
            idForRow: (section, row) => `${section}:${row}`,
            idForHeader: (section) => section,
            poolIdForHeader: (section) => 'header',
            poolIdForRow: (section, row) => 'row',
            heightForHeader: (container, section) => 38,
            heightForRow: (container, section, row) => container.offsetHeight
          };
      });

    })(document.querySelector('layout-vertical'));
  </script>

  <script src="../dist/layout.js"></script>
</body>
</html>
